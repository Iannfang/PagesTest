<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <meta name="theme-color" content="#cf3a3f">
        <title>AR 2017</title>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
      <div class="phone">
        <div class="container">
          <div class="title">AR</div>
          <a class="btn" href="play.html" onClick="checkBrowser()">扫码</a>
          <a class="btn" href="code.html">AR 码</a>
          <a class="footer" href="https://github.com/codefalling/ar-demo-mobile-browser">@当轩(codefalling)</a>
        </div>
      </div>
    </body>
    <script>
	/*
	 function checkBrowser(e){
	   var ua = navigator.userAgent.toLowerCase();
	   var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
	   if(!isAndroid) {
		 alert('该功能仅在 Android 上可用');
		 window.event.preventDefault();
		 return false;
	   }
	 }
	 */
	 
		function test() {
			if (typeof DeviceMotionEvent.requestPermission === 'function') {
				DeviceMotionEvent.requestPermission().then((permissionState) => {
					if (permissionState === 'granted') {
						window.addEventListener('devicemotion', () => {});
					}
					else{
						alert(permissionState);
						var confirm = window.confirm('由于IOS系统需要手动获取访问动作与方向的权限，为了保证抽奖正常运行，请在访问提示中点击允许！');
						confirm && test();
					}
				}).catch((error) => {
					alert(error);
					var confirm = window.confirm('由于IOS系统需要手动获取访问动作与方向的权限，为了保证抽奖正常运行，请在访问提示中点击允许！');
					confirm && test();
				})
			} else {
				  // 处理常规的非iOS 13+设备
				console.log("处理常规的非iOS 13+设备")
			}
		}
			
		var confirm = window.confirm('由于IOS系统需要手动获取访问动作与方向的权限，为了保证抽奖正常运行，请在访问提示中点击允许！');
		confirm && test();
    </script>
</html>

